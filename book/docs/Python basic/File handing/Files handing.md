# Работа с файлами в Python

Для работы с файлами, которые расположены на компьютере или другом устройстве, Python имеет специальные инструменты. Прежде всего стоит отметить, что любой файл является набором символов и может быть представлен в виде текстового файла.

## Файловый тип данных

Для создания типа данных как файл, используется функция `open()`. Синтаксис функции:

      open(filename[, mode])

`filename` - обязательный аттрибут. Это должен быть полный путь до файла, либо только его имя, если он находится в папке интерпретатора Python.
`mode` - режим работы с файлом. По умолчанию 'rt' - файл доступен только для чтения в текстовом режиме.

Список режимов работы:

| Режим | Описание |
| :---: | --- |
| `'r'` | Режим чтения. Открывает файл для чтения, возвращает ошибку, если файл не существует. Это режим по умолчанию |
| `'a'` | Режим добавления. Открывает файл для добавления, создает файл, если он не существует |
| `'w'` | Режим записи. Открывает файл для записи, создает файл, если он не существует |
| `'x'` | Режим создания. Создает файл, возвращает ошибку, если файл уже существует |
| --- | __Представление файла__ |
| `'t'` | Текстовый режим. Значение по умолчанию |
| `'b'` | Бинарный режим (например для изображений) |

По умолчанию выбирается режим `'rt'`, который можно не указывать. Пример записи:
  
```python
>>> f = open('newfile.txt')
>>> f
<_io.TextIOWrapper name='/Users/admin/Developer/Python/newfile.txt' mode='r' encoding='UTF-8'>
```

Это тоже самое, что и пример ниже:

```python
>>> f = open('newfile.txt', 'rt')
>>> f
<_io.TextIOWrapper name='/Users/admin/Developer/Python/newfile.txt' mode='r' encoding='UTF-8'>
``` 

## Чтение файлов

Для чтения файлов доступны такие методы, как `read()`, `readline()`, а также возможность построчного чтения файлов в цикле.

Прочтем данные в файле `'/Users/admin/Developer/Python/newfile.txt'` с помощью метода `read()`:
  
```python
>>> f = open('/Users/admin/Developer/Python/newfile.txt')
>>> text = f.read()
>>> text
'Hello, world!\nHi, there!'
>>> print(text)
Hello, world!
Hi, there!
>>> f.close()
``` 

Заметим, как отображает текст функция `print()`. Она переводит текст файла в отформатированный вид. Выполнение процесса закрытия файла `f.close()` не является строго обязательным, но крайне желательным.

Вместо того, чтобы прочитать сразу весь файл, мы можем дать методу `read()` число символов, которые нужно прочитать:
  
```python
>>> f = open('/Users/admin/Developer/Python/newfile.txt')
>>> text = f.read(6)
>>> text
'Hello,'
>>> f.close()
``` 

Рассмотрим метод `readline()`, который читает сразу не весь файл, а следующую еще непрочитанная строку:
  
```python
>>> f = open('/Users/admin/Developer/Python/newfile.txt', 'r')
>>> f.readline()  # Чтение первой строки
'Hello, world!\n'
>>> f.readline()  # Чтение второй строки
'Hi, there!'
>>> f.readline()  # Файл прочитан, при дальнейшем вызове методов чтения мы будем получать пустые строки
''
>>> f.close()
``` 

Более удобным способом чтения файла может быть его построковое чтение в цикле:
  
```python
>>> for line in f:
...     print(line)
...
Hello, world!

Hi, there!
``` 

## Запись файлов

Для записи данных в файлы необходимо использовать один из двух режимов, вместо режима `'r'`:

`'w'` - режим записи файла. Особенность метода заключается в том, что если файл уже существует, то он сотрет все содержимое при открытии.
`'a'` - режим добавления. Режим такой же, как и `'w'`, но он ничего не стирает, а при записи данных добавляет их в конец файла.

Давайте попробуем добавить в файл `newfile.txt`, с которым мы работали выше, пару новых строчек:
  
```python
>>> f = open('/Users/admin/Developer/Python/newfile.txt', 'a')
>>> f.write("It is the append mode.\nIt doesn't overwrite existing text!")
58
>>> f.close()
``` 

Мы воспользовались режимом `'a'` (append), который добавляет новые данные в конец файла. Давайте убедимся в этом:
  
```python
>>> f = open('/Users/admin/Developer/Python/newfile.txt')
>>> print(f.read())
Hello, world!
Hi, there!It is the append mode.
It doesn't overwrite existing text!
>>> f.close()
``` 

Все верно. Теперь воспользуемся режимом `'w'` (write), с помощью которого перепишем весь текст на новый:
  
```python
>>> f = open('/Users/admin/Developer/Python/newfile.txt', 'w')
>>> f.write("It's the write mode!")
20
>>> f.close()
>>>
>>> f = open('/Users/admin/Developer/Python/newfile.txt')
>>> f.read()
"It's the write mode!"
>>> f.close()
``` 

Заметим, что для чтения файла необходим режим `'r'`:
  
```python
>>> f = open('/Users/admin/Developer/Python/newfile.txt', 'a')
>>> f.read()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
io.UnsupportedOperation: not readable
``` 

## Создание файлов

Для создания файла подходят 3 режима:
- `'w'` - write mode
- `'a'` - append mode
- `'x'` - create mode

С первыми двумя режимами мы знакомы. Если файл не существует, то при вызове этих режимов он создается автоматически, если существует, то программа продолжает работать, как и запланировано.

Режим создания файла `'x'` также создает файл, если он не существует, но если он уже существует на момент выполнения программы, то появится ошибка `FileExistsError`:
  
```python
>>> f = open('/Users/admin/Developer/Python/newfile.txt', 'x')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
FileExistsError: [Errno 17] File exists: '/Users/admin/Developer/Python/newfile.txt'
``` 

## Удаление файлов
  
Для удаления файлов и папок Python имеет в своей библиотеке модуль `os`.

Для удаления файла необходимо воспользоваться методом `os.remove()`, передав ему путь до целевого файла:

```python
>>> import os
>>> os.remove('/Users/admin/Developer/Python/newfile.txt')
``` 

Однако, файл может быть перенесен или удален к тому времени, когда наша программа будем выполнять данную команду. Поэтому на практике данная операция оборачивается в конструкцию `try...except...`:
  
```python
>>> path = '/Users/admin/Developer/Python/newfile.txt'
>>> if os.path.exists(path):
...     os.remove(path)
... else:
...     print("File doesn't exist")
...
>>>
```

## Заключение

Работа с файлами в файловой системы компьютера - это возможность сохранения результата работы программы в долговременной памяти, возможность создания более сложных программ, отличный инструмент и другое.
