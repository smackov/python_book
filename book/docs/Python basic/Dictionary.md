# Dictionaries - словари

***

Словарь - это коллекция, в которой хранятся неупорядоченные, изменяемые и неповторяющиеся элементы. Словари хранят данные в виде ключ-значение. Также словари называют ассоциативными массивами или хеш-таблицами.
Словари записываются в фигурных скобках и имеют ключи и значения.

## Методы создания словарей

- Создание с помощью литерала (введения значений):

```python
>>> book_prices = {'red book': 100, 'green book': 200, 'SQL Expert': 400}
>>> book_prices
{'red book': 100, 'green book': 200, 'SQL Expert': 400}
>>> type(book_prices)
<class 'dict'>

>>> empty_dict = {}
>>> empty_dict
{}
>>> type(empty_dict)
<class 'dict'>
```

- Создание словаря с помощью класса `dict`:

```python
>>> book_prices = dict(red_book=100, green_book=200, sql_expert=400)
>>> book_prices
{'red_book': 100, 'green_book': 200, 'sql_expert': 400}

>>> empty_dict = dict()
>>> empty_dict
{}
```

- Создание словаря с помощью метода `fromkeys` класса `dict`. Данный метод возвращает словарь с указанными ключами и указанным значением для всех записей словаря:

```python
>>> book_prices = dict.fromkeys(('red book', 'green book', 'SQL Expert'), 100)
>>> book_prices
{'red book': 100, 'green book': 100, 'SQL Expert': 100}

>>> empty_dict = dict.fromkeys(())
>>> empty_dict
{}
```

Синтаксис данного метода:

```python
dict.fromkeys(keys, value)
```

где  `keys` - список ключей, `value` - значение для всех ключей (если значение атриубута не указано, то он принимает значение `None`)

- Создание словаря с помощью генератора словарей:

```python
>>> squares = {num: num ** 2 for num in range(5)}
>>> squares
{0: 0, 1: 1, 2: 4, 3: 9, 4: 16}
```

## Получение данных

Мы можем получить значение элемента словаря, обратившись к словарю по ключу в квадратных скобках.

```python
>>> book_prices['red book']
100
>>> book_prices['green book']
200
>>> book_prices['SQL Expert']
400
```

Также можно воспользоваться методом `get()`, который дает такой же результат.

```python
>>> book_prices.get('red book')
100
```

Для получения списка ключей словаря мы можем воспользоваться методом `keys()`.

```python
>>> book_prices.keys()
dict_keys(['red book', 'green book', 'SQL Expert'])
```

Что если нам нужно получить значения всех элементов? В этом случае мы можем воспользоваться методом `values()`.

```python
>>> book_prices.values()
dict_values([100, 200, 400])
```

В том случае, если мы хотим получить и значения, и ключи всего словаря, нам поможет метод `items()`. Он возвращает каждую пару ключ-значение кортежем и пакует все элементы в экземпляр класса `dict_items`.

```python
>>> book_prices.items()
dict_items([('red book', 100), ('green book', 200), ('SQL Expert', 400)])
```

## Изменение данных

Мы можем изменить значение определенного элемента, используя ключ элемента. Увеличим стоимость книги `red book` с 100 до 150:

```python
>>> book_prices['red book'] = 150
>>> book_prices['red book']
150
```

Что если мы хотим изменить сразу несколько элементов словаря? Допустим, что мы хотим поднять стоимости всех остальных книг. Для этого мы воспользуемся методом `update()`, который обновит наш словарь элементами, указанными как аргументы. Аргументом может быть словарь:

```python
>>> book_prices.update({'green book': 250, 'SQL Expert': 500})
>>> book_prices
{'red book': 150, 'green book': 250, 'SQL Expert': 500}
```

Но также мы можем передать любую другую итерабельную последовательность в формате `ключ-значение`. Передадим в качестве аргумента не словарь *{'green book': 250, 'SQL Expert': 500}*, а кортеж *(('green book', 250), ('SQL Expert', 500))*:

```python
>>> book_prices.update((('green book', 250), ('SQL Expert', 500)))
>>> book_prices
{'red book': 150, 'green book': 250, 'SQL Expert': 500}
```

## Добавление элементов

Добавление элементов в словарь похоже на процесс изменения элементов, рассмотренный выше. Чтобы создать элемент, мы можем обратиться к словарю по ключу и задать ему значение с помощью знака присваивания. Добавим новую книгу в наш словарь:

```python
>>> book_prices['Essential Python'] = 600
>>> book_prices
{'red book': 150, 'green book': 250, 'SQL Expert': 500, 'Essential Python': 600}
```

Также мы можем использовать знакомый метод `update()`, передав ему в качестве атрибута словарь или другую итерабельную последовательность в формате `ключ-значение`:

```python
>>> book_prices.update({'Essential Python': 600})
>>> book_prices
{'red book': 150, 'green book': 250, 'SQL Expert': 500, 'Essential Python': 600}
```

## Удаление элементов

Для удаления определенного элемента словаря подходит метод `pop()`. Данный метод удаляет указанный элемент из словаря и возвращает его значение. В качестве аргемента должен быть предоставлен ключ удаляемого элемента. Результат выполнения метода можно записать в переменную:

```python
>>> deleted_item = book_prices.pop('Essential Python')
>>> deleted_item
600
>>> book_prices
{'red book': 150, 'green book': 250, 'SQL Expert': 500}
```

В нашем распоряжении есть метод `popitem()`, который удаляет последний введенный элемент словаря:

```python
>>> book_prices
{'red book': 150, 'green book': 250, 'SQL Expert': 500}
>>> book_prices.popitem()
('SQL Expert', 500)
```

Также мы можем удалить элемент с помощью инструкции `del`. Оне ничего не возвращает, только удаляет обозначенный элемент.

```python
>>> del book_prices['Essential Python']
>>> book_prices
{'red book': 150, 'green book': 250, 'SQL Expert': 500}
```

С помощью инструкции `del` можно удалить также весь словарь. После удаления словаря при попытке обратиться к нему мы получим ошибку о том, что имя 'book_prices' не существует:

```python
>>> del book_prices
>>> book_prices
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'book_prices' is not defined
```

Если же мы не хотим удалять словарь? Что если нам нужно только его полностью очистить, чтобы он стал пустым? Для этой цели подходит метод `clear()`:

```python
>>> book_prices.clear()
>>> book_prices
{}
```

## Работа со словарями в циклах

При стандартной работе со словарями в циклах мы получаем в качестве значений - ключи.

```python
>>> for item in book_prices:
...     print(item)
...
red book
green book
SQL Expert
```

Действительно, переменная `item` последовательно принимает все имена ключей нашего словаря. Для получений значений элементов в теле цикла мы можем обратится к словарю по имени ключа:

```python
>>> for item in book_prices:
...     print(book_prices[item])
...
150
250
500
```

Либо мы можем использовать метод `values()`, который возвращает все значения словаря, а не ключи.

```python
>>> for item in book_prices.values():
...     print(item)
...
150
250
500
```

Для более удобной работы с ключами и значениями словаря в циклах можно использовать метод `items()`, который возвращает пары ключ-значение:

```python
>>> for key, value in book_prices.items():
...     print(f'{key}: {value}')
...
red book: 150
green book: 250
SQL Expert: 500
```

## Копирование словарей

В том случе, если мы создаем новый словарь, используя знак присваивания `dict_1 = dict_2`, мы создаем новую ссылку на словарь, а не новый объект. Рассмотрим пример ниже. Создадим новый словарь `new_dict` с помощью знака присваивания. Теперь оба словаря ссылаются на один и тот же объект, и при изменении одного словаря, будет меняться и другой:

```python
>>> new_dict = book_prices
>>> new_dict
{'red book': 150, 'green book': 250}
>>> new_dict.popitem()
('green book', 250)
>>>
>>> new_dict
{'red book': 150}
>>> book_prices
{'red book': 150}
```

Посмотрим на идентификаторы этих двух словарей в памяти компьютера, чтобы убедиться, что они ссылаются на одну и туже ячейку памяти:

```python
>>> id(new_dict)
4420864448
>>> id(book_prices)
4420864448
```

Для создания нового словаря, а не ссылки, как мы сделали в примере выше, существуют два способа. Первый способ - использование метода `copy()`:

```python
>>> new_dict = book_prices.copy()
>>> id(book_prices)
4420864512
>>> id(new_dict)
4422458432
```

Как мы видим, идентификаторы двух словарей разные. Теперь при изменении одного словаря, другой не изменяется. Добавим новый элемент в новый словарь и проверим старый:

```python
>>> new_dict['blue book'] = 300
>>> new_dict
{'red book': 150, 'green book': 250, 'blue book': 300}
>>> book_prices
{'red book': 150, 'green book': 250}
```

Второй способ создания копии словаря - это использование самого класса `dict()`, с которым мы уже сталкивались.

```python
>>> new_dict = dict(book_prices)
>>> new_dict
{'red book': 150, 'green book': 250}
```

## Вложенные словари

Вложенные словари - это словари, которые хранят в себе другие словари. Создадим вложенный словарь, похожий на `book_prices`, но имеющий большие возможности по хранению информации:

```python
>>> book_list = {
...     'red book': {
...             'price': 150,
...             'description': 'Modern book'
...             },
...     'green book': {
...             'price': 250,
...             'description': 'Classic book'
...             }
...     }
```

Как мы видим, теперь мы можем хранить больше информации, чем только цену. Для получения доступа к элементам вложенного словаря мы также используем имена ключей:

```python
>>> book_list['red book']
{'price': 150, 'description': 'Modern book'}
>>> book_list['red book']['price']
150
>>> book_list['red book']['description']
'Modern book'
```

## Заключение

На данном уроке мы рассмотрели новый тип данных - словари. Это весьма важная тема, так как словари используются в большинстве задач, и умение работать с ними - необходимая вещь в работе программиста.
